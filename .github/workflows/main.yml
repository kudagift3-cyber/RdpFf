name: Linux VPS with SSH Access

on:
  workflow_dispatch:

jobs:
  linux-vps:
    runs-on: ubuntu-latest
    timeout-minutes: 360  # Runner stays alive max 6 hours
    steps:
    - name: Setup tmate session
      run: |
        sudo apt-get update
        sudo apt-get install -y tmate openssh-client

        # Start tmate session in detached mode
        tmate -S /tmp/tmate.sock new-session -d
        tmate -S /tmp/tmate.sock wait tmate-ready

        echo ""
        echo "=========================================="
        echo " ğŸš€ Your temporary VPS is ready!"
        echo ""
        echo "ğŸ”‘ Full SSH Access:"
        tmate -S /tmp/tmate.sock display -p '#{tmate_ssh}'
        echo ""
        echo "ğŸ‘€ Read-Only Access:"
        tmate -S /tmp/tmate.sock display -p '#{tmate_ssh_ro}'
        echo ""
        echo "ğŸŒ Web Access (open in browser):"
        tmate -S /tmp/tmate.sock display -p '#{tmate_web}'
        echo ""
        echo "âš ï¸  This VPS will auto-terminate after 6 hours or when you stop the workflow."
        echo "=========================================="
        echo ""

        # Keep session alive
        sleep infinity
